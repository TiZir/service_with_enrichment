# Сервис с обогащением данных
## Техническое задание
### Задача:

**Еще не сделано логирование, проблемы с работой фильтра и пагинации. Тестирование проводилось только для добавления, удаления, обновления. В ближайшем времени все будет исправленно (чуть не успел)**

Реализовать сервис, который будет получать по апи ФИО, из открытых апи обогащать
ответ наиболее вероятными возрастом, полом и национальностью и сохранять данные в
БД. По запросу выдавать инфу о найденных людях. Необходимо реализовать следующее

**Основное задание (минимум):**
1. Выставить rest методы
    * 1.1. Для получения данных с различными фильтрами и пагинацией
    * 1.2. Для удаления по идентификатору
    * 1.3. Для изменения сущности
    * 1.4. Для добавления новых людей в формате
```json
    {
    "name": "Dmitriy",
    "surname": "Ushakov",
    "patronymic": "Vasilevich" // необязательно
    }
```
2. Корректное сообщение обогатить
    * 2.1. Возрастом - https://api.agify.io/?name=Dmitriy
    * 2.2. Полом - https://api.genderize.io/?name=Dmitriy
    * 2.3. Национальностью - https://api.nationalize.io/?name=Dmitriy
3. Обогащенное сообщение положить в БД postgres (структура БД должна быть создана
путем миграций)
4. Покрыть код debug- и info-логами
5. Вынести конфигурационные данные в .env

## Реализация
### Файловая система и файлы
**Опишу после полного теста**

### Запуск
1. Меняем файл .env под свою конфигурацию
2. Делаем постройку образов Docker
   
   ```sh
   docker compose build
   ```

3. Поднимаем контейнеры

   ```sh
   docker compose up -d
   ```

4. Делаем запросы через Postman

### Примеры запросов/ответов 
#### Основное задание
* Метод добавления новых людей
  
Запрос POST: http://localhost:9090/users

   Тело:

  ```JSON
    {
        "name": "Bob",
        "surname": "Ushakov",
        "patronymic": "Vasilevich"
    }
  ```
  Ответ:

  ```JSON
    {
        "id": 1,
        "name": "Bob",
        "surname": "Ushakov",
        "patronymic": "Vasilevich",
        "age": 69,
        "gender": "male",
        "country_id": "US"
    }
  ```

* Метод для получения данных (без фильтра по id)
  
Запрос GET: http://localhost:9090/users/{id}

  Ответ:

  ```JSON
    {
        "id": 1,
        "name": "Bob",
        "surname": "Ushakov",
        "patronymic": "Vasilevich",
        "age": 69,
        "gender": "male",
        "country_id": "US"
    }
  ```

* Метод для удаления по идентификатору
  
Запрос DELETE: http://localhost:9090/users/{id}

  Ответ:

  ```JSON
    {
        "id": 1,
        "name": "Bob",
        "surname": "Ushakov",
        "patronymic": "Vasilevich",
        "age": 69,
        "gender": "male",
        "country_id": "US"
    }
  ```
  
* Метод для изменения сущности
  
Запрос PUT: http://localhost:9090/users/{id}

   Тело:

  ```JSON
    {
        "name": "Boba",
        "surname": "Pupkin",
        "patronymic": "Elita",
        "age": 20
    }
  ```
  Ответ:

  ```JSON
    {
        "id": 1,
        "name": "Boba",
        "surname": "Pupkin",
        "patronymic": "Elita",
        "age": 20,
        "gender": "male",
        "country_id": "US"
    }
  ```
